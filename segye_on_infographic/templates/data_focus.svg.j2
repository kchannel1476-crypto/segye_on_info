{% import "_tokens.j2" as T %}
<svg xmlns="http://www.w3.org/2000/svg" width="{{ canvas.w }}" height="{{ canvas.h }}" viewBox="0 0 {{ canvas.w }} {{ canvas.h }}">
  <defs>
    {{ T.common_styles() }}
  </defs>

  {% include "_tokens.j2" %}

  <rect class="bg" x="0" y="0" width="{{ W }}" height="{{ H }}"/>

  <!-- Header -->
  <text class="h1 ink" x="{{ x0 }}" y="{{ m + 72 }}">{{ text.headline }}</text>
  {% if text.dek %}
    <text class="dek muted" x="{{ x0 }}" y="{{ m + 120 }}">{{ text.dek }}</text>
  {% endif %}
  <line class="hair" x1="{{ x0 }}" y1="{{ header_line_y }}" x2="{{ x1 }}" y2="{{ header_line_y }}"/>

  <!-- Body: Chart placeholder (rendered as clean box in MVP) -->
  {% set chart_y = body_top %}
  <text class="label ink" x="{{ x0 }}" y="{{ chart_y }}">데이터</text>

  <rect class="box" x="{{ x0 }}" y="{{ chart_y + 30 }}" width="{{ x1 - x0 }}" height="360" rx="18" />
  <text class="body muted" x="{{ x0 + 28 }}" y="{{ chart_y + 120 }}">
    {{ text.chart_title if text.chart_title else "차트(막대/라인/도넛) 영역" }}
  </text>
  <text class="small muted" x="{{ x0 + 28 }}" y="{{ chart_y + 160 }}">
    {{ text.chart_note if text.chart_note else "※ MVP에서는 박스 표시, 다음 단계에서 실제 SVG 차트로 렌더링" }}
  </text>

  <!-- Bottom split: 7col key_points / 5col big_numbers -->
  {% set split_y = chart_y + 430 %}
  <line class="hair" x1="{{ x0 }}" y1="{{ split_y }}" x2="{{ x1 }}" y2="{{ split_y }}"/>

  <!-- Left (7col): key points -->
  {% set left_x = x0 %}
  {% set left_w = (x1 - x0) * 0.62 %}
  <text class="label ink" x="{{ left_x }}" y="{{ split_y + 70 }}">해석</text>

  {% set kpy = split_y + 140 %}
  {% for i in range(3) %}
    {% set yy = kpy + (i * 86) %}
    <circle cx="{{ left_x + 12 }}" cy="{{ yy - 10 }}" r="6" fill="#111111"/>
    <text class="body ink" x="{{ left_x + 36 }}" y="{{ yy }}">{{ text.key_points[i] }}</text>
  {% endfor %}

  <!-- Right (5col): big numbers -->
  {% set right_x = x0 + left_w + 24 %}
  {% set right_w = x1 - right_x %}
  <rect class="box" x="{{ right_x }}" y="{{ split_y + 30 }}" width="{{ right_w }}" height="310" rx="18" />
  <text class="label ink" x="{{ right_x + 24 }}" y="{{ split_y + 90 }}">핵심 수치</text>

  <text class="bodyb ink" x="{{ right_x + 24 }}" y="{{ split_y + 160 }}">{{ text.big1 }}</text>
  <text class="small muted" x="{{ right_x + 24 }}" y="{{ split_y + 198 }}">{{ text.big1_label }}</text>

  <line class="hair" x1="{{ right_x + 24 }}" y1="{{ split_y + 220 }}" x2="{{ right_x + right_w - 24 }}" y2="{{ split_y + 220 }}"/>

  <text class="bodyb ink" x="{{ right_x + 24 }}" y="{{ split_y + 270 }}">{{ text.big2 }}</text>
  <text class="small muted" x="{{ right_x + 24 }}" y="{{ split_y + 308 }}">{{ text.big2_label }}</text>

  <!-- Footer -->
  <line class="hair" x1="{{ x0 }}" y1="{{ footer_line_y }}" x2="{{ x1 }}" y2="{{ footer_line_y }}"/>
  <text class="small muted" x="{{ x0 }}" y="{{ sources_y }}">{{ text.sources_line }}</text>
</svg>
